(function(a){function f(a,b){for(var c=a.length;--c>=0;)if(a[c]===b)return!0}function g(a){return e(a)?a:[a]}function h(a){var b=[],c=-1,d,e=a.length;while(++c<e)d=a[c],f(b,d)||b.push(d);return b}function i(a){return function(){for(var c=arguments.length;--c>=0;){var d=g(arguments[c]);for(var e=d.length;--e>=0;)a[d[e]]=!0}}}function j(a,b){for(var c in a)a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function k(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var b=this,c={VERSION:"0.0.2"},d=b.classes;typeof module!="undefined"&&module.exports&&(module.exports=c),b.classes=c,c.noConflict=function(){return b.classes=d,this};var e=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};c.namespace=function(){function c(a){var d=[],e=-1,f=a.length,g;while(++e<f)g=a[e],d=d.concat(c(b.get(g).extend)),d.push(g);return d}var b=a.create(),d={define:function(a,d,e){b.need(d,function(){if(b.get(a))return;var f=h(c(d)),g,k=b.get(f),l,m,n,o={},p,q,r={},s={},t=i(o);for(l=0,m=k.length;l<m;l++){g=k[l],p=g.exposed;for(n in p)p.hasOwnProperty(n)&&t(n);q=g.singleton;for(n in q)q.hasOwnProperty(n)&&(s[n]=r[n]=q[n])}e(s,r,t),t("instance"),b.set(a,{singleton:s,exposed:j(o,s),extend:d})})},get:function(a,c){var d=b.get(g(a)),e=[],f=-1,h=d.length;while(++f<h)e.push(d[f]&&d[f].exposed||undefined);return c?c.apply({},e):typeof a=="string"?e[0]:e},instanciate:function(a,d){var e=[];return b.need(a,function(){b.each(a,function(a,d){var f=h(c(d.extend)).concat([a]),g,l=b.get(f),m,n=-1,o=l.length,p={},q,r={},s=i(p);while(++n<o)g=l[n],q=g&&g.singleton&&g.singleton.instance,q&&q(r,k(r),s);e.push(j(p,r))}),d&&d.apply({},e)}),e.length==1?e[0]:e},once:function(a,c){b.once(a,function(){d.get(a,c)})}};return d};var l=c.namespace();c.define=l.define,c.get=l.get,c.instanciate=l.instanciate,c.once=l.once})(atom)
